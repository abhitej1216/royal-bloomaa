{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.cartItems = [];\n    this.cartSubject = new BehaviorSubject([]);\n    this.totalSubject = new BehaviorSubject(0);\n    this.cart$ = this.cartSubject.asObservable();\n    this.total$ = this.totalSubject.asObservable();\n    // Load cart from localStorage on service initialization\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      this.cartItems = JSON.parse(savedCart);\n      this.updateCart();\n    }\n  }\n  addToCart(item) {\n    const existingItem = this.cartItems.find(i => i.id === item.id);\n    if (existingItem) {\n      existingItem.quantity += 1;\n    } else {\n      this.cartItems.push({\n        ...item,\n        quantity: 1\n      });\n    }\n    this.updateCart();\n  }\n  removeFromCart(itemId) {\n    this.cartItems = this.cartItems.filter(item => item.id !== itemId);\n    this.updateCart();\n  }\n  updateQuantity(itemId, quantity) {\n    const item = this.cartItems.find(i => i.id === itemId);\n    if (item) {\n      item.quantity = quantity;\n      if (quantity <= 0) {\n        this.removeFromCart(itemId);\n      } else {\n        this.updateCart();\n      }\n    }\n  }\n  clearCart() {\n    this.cartItems = [];\n    this.updateCart();\n  }\n  updateCart() {\n    this.cartSubject.next([...this.cartItems]);\n    this.updateTotal();\n    // Save cart to localStorage\n    localStorage.setItem('cart', JSON.stringify(this.cartItems));\n  }\n  updateTotal() {\n    const total = this.cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    this.totalSubject.next(total);\n  }\n  static {\n    this.ɵfac = function CartService_Factory(t) {\n      return new (t || CartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","cartItems","cartSubject","totalSubject","cart$","asObservable","total$","savedCart","localStorage","getItem","JSON","parse","updateCart","addToCart","item","existingItem","find","i","id","quantity","push","removeFromCart","itemId","filter","updateQuantity","clearCart","next","updateTotal","setItem","stringify","total","reduce","sum","price","factory","ɵfac","providedIn"],"sources":["C:\\Codes\\royal-bloomaa\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport interface CartItem {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  image: string;\r\n  quantity: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartService {\r\n  private cartItems: CartItem[] = [];\r\n  private cartSubject = new BehaviorSubject<CartItem[]>([]);\r\n  private totalSubject = new BehaviorSubject<number>(0);\r\n\r\n  cart$ = this.cartSubject.asObservable();\r\n  total$ = this.totalSubject.asObservable();\r\n\r\n  constructor() {\r\n    // Load cart from localStorage on service initialization\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      this.cartItems = JSON.parse(savedCart);\r\n      this.updateCart();\r\n    }\r\n  }\r\n\r\n  addToCart(item: Omit<CartItem, 'quantity'>) {\r\n    const existingItem = this.cartItems.find(i => i.id === item.id);\r\n\r\n    if (existingItem) {\r\n      existingItem.quantity += 1;\r\n    } else {\r\n      this.cartItems.push({ ...item, quantity: 1 });\r\n    }\r\n\r\n    this.updateCart();\r\n  }\r\n\r\n  removeFromCart(itemId: number) {\r\n    this.cartItems = this.cartItems.filter(item => item.id !== itemId);\r\n    this.updateCart();\r\n  }\r\n\r\n  updateQuantity(itemId: number, quantity: number) {\r\n    const item = this.cartItems.find(i => i.id === itemId);\r\n    if (item) {\r\n      item.quantity = quantity;\r\n      if (quantity <= 0) {\r\n        this.removeFromCart(itemId);\r\n      } else {\r\n        this.updateCart();\r\n      }\r\n    }\r\n  }\r\n\r\n  clearCart() {\r\n    this.cartItems = [];\r\n    this.updateCart();\r\n  }\r\n\r\n  private updateCart() {\r\n    this.cartSubject.next([...this.cartItems]);\r\n    this.updateTotal();\r\n    // Save cart to localStorage\r\n    localStorage.setItem('cart', JSON.stringify(this.cartItems));\r\n  }\r\n\r\n  private updateTotal() {\r\n    const total = this.cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    this.totalSubject.next(total);\r\n  }\r\n} "],"mappings":"AACA,SAASA,eAAe,QAAQ,MAAM;;AAatC,OAAM,MAAOC,WAAW;EAQtBC,YAAA;IAPQ,KAAAC,SAAS,GAAe,EAAE;IAC1B,KAAAC,WAAW,GAAG,IAAIJ,eAAe,CAAa,EAAE,CAAC;IACjD,KAAAK,YAAY,GAAG,IAAIL,eAAe,CAAS,CAAC,CAAC;IAErD,KAAAM,KAAK,GAAG,IAAI,CAACF,WAAW,CAACG,YAAY,EAAE;IACvC,KAAAC,MAAM,GAAG,IAAI,CAACH,YAAY,CAACE,YAAY,EAAE;IAGvC;IACA,MAAME,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC9C,IAAIF,SAAS,EAAE;MACb,IAAI,CAACN,SAAS,GAAGS,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC;MACtC,IAAI,CAACK,UAAU,EAAE;;EAErB;EAEAC,SAASA,CAACC,IAAgC;IACxC,MAAMC,YAAY,GAAG,IAAI,CAACd,SAAS,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,CAAC;IAE/D,IAAIH,YAAY,EAAE;MAChBA,YAAY,CAACI,QAAQ,IAAI,CAAC;KAC3B,MAAM;MACL,IAAI,CAAClB,SAAS,CAACmB,IAAI,CAAC;QAAE,GAAGN,IAAI;QAAEK,QAAQ,EAAE;MAAC,CAAE,CAAC;;IAG/C,IAAI,CAACP,UAAU,EAAE;EACnB;EAEAS,cAAcA,CAACC,MAAc;IAC3B,IAAI,CAACrB,SAAS,GAAG,IAAI,CAACA,SAAS,CAACsB,MAAM,CAACT,IAAI,IAAIA,IAAI,CAACI,EAAE,KAAKI,MAAM,CAAC;IAClE,IAAI,CAACV,UAAU,EAAE;EACnB;EAEAY,cAAcA,CAACF,MAAc,EAAEH,QAAgB;IAC7C,MAAML,IAAI,GAAG,IAAI,CAACb,SAAS,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKI,MAAM,CAAC;IACtD,IAAIR,IAAI,EAAE;MACRA,IAAI,CAACK,QAAQ,GAAGA,QAAQ;MACxB,IAAIA,QAAQ,IAAI,CAAC,EAAE;QACjB,IAAI,CAACE,cAAc,CAACC,MAAM,CAAC;OAC5B,MAAM;QACL,IAAI,CAACV,UAAU,EAAE;;;EAGvB;EAEAa,SAASA,CAAA;IACP,IAAI,CAACxB,SAAS,GAAG,EAAE;IACnB,IAAI,CAACW,UAAU,EAAE;EACnB;EAEQA,UAAUA,CAAA;IAChB,IAAI,CAACV,WAAW,CAACwB,IAAI,CAAC,CAAC,GAAG,IAAI,CAACzB,SAAS,CAAC,CAAC;IAC1C,IAAI,CAAC0B,WAAW,EAAE;IAClB;IACAnB,YAAY,CAACoB,OAAO,CAAC,MAAM,EAAElB,IAAI,CAACmB,SAAS,CAAC,IAAI,CAAC5B,SAAS,CAAC,CAAC;EAC9D;EAEQ0B,WAAWA,CAAA;IACjB,MAAMG,KAAK,GAAG,IAAI,CAAC7B,SAAS,CAAC8B,MAAM,CAAC,CAACC,GAAG,EAAElB,IAAI,KAAKkB,GAAG,GAAIlB,IAAI,CAACmB,KAAK,GAAGnB,IAAI,CAACK,QAAS,EAAE,CAAC,CAAC;IACzF,IAAI,CAAChB,YAAY,CAACuB,IAAI,CAACI,KAAK,CAAC;EAC/B;;;uBA7DW/B,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAAmC,OAAA,EAAXnC,WAAW,CAAAoC,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}